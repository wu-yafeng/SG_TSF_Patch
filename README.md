# SG_TSF_Patch

由于Microsoft的更新，自从Windows 8.1 以后，windows使用了一种称之为TSF的机制用于管理输入法，这导致QQ三国的原有使用的IME相关的API不在生效。

具体的表现是：当游戏在没有任何非输入窗口获得焦点时，输入法依然是启用的状态，这意味着玩家游玩时需要手动的按shift来切换输入法语言来禁用输入法窗口。


微软在1月29号发布的[KB5050092补丁](https://support.microsoft.com/zh-cn/topic/2025-%E5%B9%B4-1-%E6%9C%88-29-%E6%97%A5-kb5050092-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%86%85%E9%83%A8%E7%89%88%E6%9C%AC-22621-4830-%E5%92%8C-22631-4830-%E9%A2%84%E8%A7%88-fc9d13d6-09c6-412e-aab5-939e2c13a768)中，针对拼音输入法编辑器（IME）的切换问题进行了优化。据微软官方表示，这一问题在多个应用窗口切换时会导致输入法语言切换为英文，现已修复。用户可以在应用间自由切换，不再担心中文输入被强制转换为英文，避免了输入中断带来的困扰。这一优化导致只要使用ALT+TAB进行切换窗口，会使QQ三国默认就是中文输入法，十分的讨厌。


## 开始

在 [Release](https://github.com/wu-yafeng/SG_TSF_Patch/releases) 中下载二进制程序，并解压到一个全英文的目录，管理员身份运行 BootMain.exe。之后会自动打开QQ三国，并注入了输入法的补丁插件。

## 说明

该插件仅能用在Windows 8.1 及以上的系统，Windows7及以下不需要也不要使用此插件。不过在按CTRL+TAB的时候，还是会自动切换为中文，可以参照这一篇文章的方法 https://zhuanlan.zhihu.com/p/23887468991

## 卸载

删除插件的目录即可。

